{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.module.ts","webpack:///src/app/components/app.component.ts","webpack:///src/app/components/app.component.html","webpack:///src/app/components/empty/empty.component.ts","webpack:///src/app/components/empty/empty.component.html","webpack:///src/app/components/login/login.component.ts","webpack:///src/app/components/login/login.component.html","webpack:///src/app/components/movie-room/movie-room.component.ts","webpack:///src/app/components/movie-room/movie-room.component.html","webpack:///src/app/components/movielist/movielist.component.ts","webpack:///src/app/components/movielist/movielist.component.html","webpack:///src/app/entities/chatMessage.ts","webpack:///src/app/entities/messageType.ts","webpack:///src/app/entities/messageWrapper.ts","webpack:///src/app/entities/movieComment.ts","webpack:///src/app/entities/requests/chatMessagesRequest.ts","webpack:///src/app/entities/requests/movieCommentsRequest.ts","webpack:///src/app/entities/requests/movieListRequest.ts","webpack:///src/app/entities/requests/movieRoomPauseRequest.ts","webpack:///src/app/entities/requests/movieRoomPlayRequest.ts","webpack:///src/app/entities/requests/movieRoomRequest.ts","webpack:///src/app/entities/requests/movieRoomSeekRequest.ts","webpack:///src/app/entities/requests/movieRoomWithIdRequest.ts","webpack:///src/app/entities/requests/movieRoomsRequest.ts","webpack:///src/app/entities/requests/saveUserRequest.ts","webpack:///src/app/entities/requests/sendChatMessageRequest.ts","webpack:///src/app/entities/requests/sendMovieCommentRequest.ts","webpack:///src/app/guards/auth.guard.ts","webpack:///src/app/services/appConfig.service.ts","webpack:///src/app/services/websocket.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","canActivate","children","pathMatch","AppRoutingModule","forRoot","imports","config","PROVIDER_ID","provider","provideConfig","AppModule","provide","useFactory","declarations","providers","bootstrap","AppComponent","authService","webSocketService","title","start","stop","signOut","selector","templateUrl","styleUrls","EmptyComponent","LoginComponent","MovieRoomComponent","route","changeDetector","chatMessages","comments","currentComment","src","room","Movie","Title","autoplay","preload","loop","fullscreen","download","quality","keyboard","muted","overlay","showFrameByFrame","currentTime","movieCurrentTime","seekedByWS","params","subscribe","console","log","authState","user","undefined","roomId","sendMovieRoomWithIdRequest","sendChatMessagesRequest","createMovieRoomResponsesSubscription","createMovieRoomUpdatesSubscription","createMovieRoomPauseUpdatesSubscription","createMovieRoomPlayUpdatesSubscription","createMovieRoomSeekUpdatesSubscription","createChatMessagesReponsesSubscription","createChatMessageUpdatesSubscription","createCommentsReponsesSubscription","createCommentUpdatesSubscription","value","chatMessage","Date","video","getVideoTag","push","sendChatMessageRequest","comment","Id","sendMovieCommentRequest","debug","detectChanges","TimeWatched","timeChange","onpause","sendPauseRequest","onplay","sendPlayRequest","onseeked","sendSeekRequest","ontimeupdate","setTimeout","next","pause","play","RoomId","self","movieRoomResponsesObserver","processMovieRoom","sendMovieCommentsRequest","error","err","complete","subscribeToMovieRoomResponses","movieRoomUpdatesObserver","subscribeToMovieRoomUpdates","subscribeToMovieRoomPauseUpdates","subscribeToMovieRoomPlayUpdates","seek","subscribeToMovieRoomSeekUpdates","chatMessagesResponseObserver","messages","length","setChatMessages","subscribeToChatMessagesReponses","chatMessagesUpdateObserver","message","addChatMessage","subscribeToChatMessageUpdates","commentsResponseObserver","setComments","subscribeToMovieCommentsReponses","commentsUpdateObserver","addComment","subscribeToMovieCommentUpdates","MovieId","show","time","find","x","Shown","CurrentTime","User","firstName","Comment","matVideo","MovielistComponent","router","movies","movieRooms","createMovieListResponsesSubscription","createMovieListUpdatesSubscription","createMovieRoomsResponsesSubscription","createMovieRoomsUpdatesSubscription","sendMovieListRequest","sendMovieRoomsRequest","movie","sendMovieRoomRequest","movieList","navigate","rooms","movieListResponsesObserver","processMovies","subscribeToMovieListResponses","movieListUpdatesObserver","subscribeToMovieListUpdates","movieRoomsResponsesObserver","processMovieRooms","subscribeToMovieRoomsResponses","movieRoomsUpdatesObserver","subscribeToMovieRoomsUpdates","ChatMessage","voiceMessage","datetime","Message","VoiceMessage","DateTime","MovieCurrentTime","MessageType","MessageWrapper","messageType","payload","type","JSON","stringify","MovieComment","movieId","ChatMessagesRequest","userId","MovieCommentsRequest","MovieListRequest","MovieRoomPauseRequest","MovieRoomPlayRequest","MovieRoomRequest","MovieRoomSeekRequest","MovieRoomWithIdRequest","MovieRoomsRequest","SaveUserRequest","SendChatMessageRequest","SendMovieCommentRequest","movieComment","AuthGuard","cookieService","loggedIn","sendSaveUserRequest","saveToCookie","authToken","idToken","state","existentCookie","get","signInWithGoogle","name","set","signIn","ux_mode","navigateByUrl","skipLocationChange","providedIn","AppConfigService","WebSocketsService","appConfigService","movieListResponseSubject","movieListUpdateSubject","movieRoomsResponseSubject","movieRoomsUpdateSubject","movieRoomResponseSubject","movieRoomUpdateSubject","movieRoomPauseUpdateSubject","movieRoomPlayUpdateSubject","movieRoomSeekUpdateSubject","chatMessagesReponseSubject","chatMessageUpdateSubject","commentsReponseSubject","commentUpdateSubject","connect","webSocketsServerUrl","webSocket","close","observer","url","WebSocket","onopen","messageEvent","info","onmessage","jsonReceived","data","handleMessage","onerror","onclose","closeEvent","request","SAVE_USER_REQUEST","sendMessage","MOVIE_LIST_REQUEST","MOVIE_ROOMS_REQUEST","MOVIE_ROOM_REQUEST","MOVIE_ROOM_WITH_ID_REQUEST","MOVIE_ROOM_PAUSE_REQUEST","MOVIE_ROOM_PLAY_REQUEST","MOVIE_ROOM_SEEK_REQUEST","CHAT_MESSAGES_REQUEST","SEND_CHAT_MESSAGE_REQUEST","MOVIE_COMMENTS_REQUEST","SEND_MOVIE_COMMENT_REQUEST","socket","reject","maxNumberOfAttempts","intervalTime","currentAttempt","interval","setInterval","clearInterval","readyState","OPEN","waitForOpenConnection","send","messageRecieved","messageWrapper","validateAndGetMessage","MOVIE_LIST_RESPONSE","parse","MOVIE_ROOMS_RESPONSE","MOVIE_ROOMS_UPDATE","roomsUpdated","MOVIE_ROOM_RESPONSE","MOVIE_ROOM_UPDATE","roomUpdated","MOVIE_ROOM_PLAY_UPDATE","roomActionPlay","UserId","Room","MOVIE_ROOM_PAUSE_UPDATE","roomActionPause","MOVIE_ROOM_SEEK_UPDATE","roomActionSeek","CHAT_MESSAGES_RESPONSE","CHAT_MESSAGE_UPDATE","MOVIE_COMMENTS_RESPONSE","MOVIE_COMMENT_UPDATE","messageReceived","hasOwnProperty","environment","production","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MovielistComponent } from './components/movielist/movielist.component';\nimport { AuthGuard } from './guards/auth.guard';\nimport { EmptyComponent } from './components/empty/empty.component';\nimport { MovieRoomComponent } from './components/movie-room/movie-room.component';\n\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: EmptyComponent,\n    canActivate: [AuthGuard]\n  },\n  {\n    path: \"movies\",\n    children:[\n      {\n        path :\":room-id\",\n        component: MovieRoomComponent,\n        pathMatch:\"full\",\n        canActivate: [AuthGuard]\n      }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { LoginComponent } from './components/login/login.component';\nimport { MovielistComponent } from './components/movielist/movielist.component';\nimport { MovieRoomComponent } from './components/movie-room/movie-room.component';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './components/app.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { SocialLoginModule, AuthServiceConfig, GoogleLoginProvider } from 'angularx-social-login';\nimport { EmptyComponent } from './components/empty/empty.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatVideoModule } from 'mat-video';\nimport { FormsModule } from '@angular/forms';\n\nconst config = new AuthServiceConfig([\n  {\n    id: GoogleLoginProvider.PROVIDER_ID,\n    provider: new GoogleLoginProvider(\"989131655048-3aj5o2omgm1fht1itf1v4j8r6lutnoss.apps.googleusercontent.com\")\n  }\n]);\nexport function provideConfig() {\n  return config;\n}\n@NgModule({\n  declarations: [\n    AppComponent,\n    LoginComponent,\n    MovielistComponent,\n    MovieRoomComponent,\n    EmptyComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    SocialLoginModule,\n    BrowserAnimationsModule,\n    MatVideoModule\n  ],\n  providers: [\n    {\n      provide: AuthServiceConfig,\n      useFactory: provideConfig\n    }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { AuthService, SocialUser } from 'angularx-social-login';\nimport { WebSocketsService } from '../services/websocket.service';\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  title = 'videostreamer';\n  signinForm: FormGroup;\n  user: SocialUser;\n  loggedIn: boolean;\n\n  constructor(private authService: AuthService, private webSocketService: WebSocketsService) {\n  }\n\n  ngOnInit() {\n    this.webSocketService.start();\n  }\n\n  ngOnDestroy(): void {\n    this.webSocketService.stop();\n  }\n\n  // signInWithGoogle(): void {\n  //   this.authService.signIn(GoogleLoginProvider.PROVIDER_ID);\n  // }\n  signOut(): void {\n    this.authService.signOut();\n  }\n}","\n\n<!-- <script src=\"https://apis.google.com/js/platform.js\" async defer></script>\n<meta name=\"google-signin-client_id\" content=\"989131655048-3aj5o2omgm1fht1itf1v4j8r6lutnoss.apps.googleusercontent.com\">\n<div class=\"g-signin2\" data-onsuccess=\"onSignIn\"></div> -->\n\n\n<!-- <html lang=\"en\"> -->\n\n<!-- <head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  <title>Document</title>\n</head> -->\n<!-- \n<body class=\"bg-light\">\n  <div class=\"container\">\n    <div class=\"row py-5 justify-content-center\">\n      <div class=\"col-md-8\">\n        <h1 class=\"text-center py-4\">Sign In in Angular 8</h1>\n        <div *ngIf=\"loggedIn===false\">\n          <form [formGroup]=\"signinForm\">\n            <div class=\"form-group\">\n              <label for=\"email\">Email</label>\n              <input type=\"text\" class=\"form-control\" id=\"email\" formControlName=\"email\">\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <input type=\"password\" class=\"form-control\" id=\"password\" formControlName=\"password\">\n            </div>\n          </form>\n          <div>\n            <p>Or</p>\n          </div>\n          <div>\n            <button type=\"button\" (click)=\"signInWithGoogle()\" class=\"btn btn-primary\">Sign In With Google</button>\n          </div>\n        </div>\n        <div *ngIf=\"loggedIn===true\">\n          <div class=\"form-group\">\n            <label for=\"firstname\">First Name</label>\n            <input type=\"text\" class=\"form-control\" id=\"firstname\" [value]=\"user.firstName\" readonly>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"lastname\">Last Name</label>\n            <input type=\"text\" class=\"form-control\" id=\"idToken\" [value]=\"user.idToken\" readonly>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"email2\">Email</label>\n            <input type=\"text\" class=\"form-control\" id=\"authToken\" [value]=\"user.authToken\" readonly>\n          </div>\n\n          <button type=\"button\" (click)=\"signOut()\" class=\"btn btn-primary\">Sign Out</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</body> -->\n\n<!-- </html> -->\n<router-outlet></router-outlet>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-empty',\n  templateUrl: './empty.component.html',\n  styleUrls: ['./empty.component.scss']\n})\nexport class EmptyComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n    \n  }\n\n}\n","<movie-list></movie-list>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>login works!</p>\n","import { Component, OnInit, ViewChild, ChangeDetectorRef, AfterViewInit } from '@angular/core';\nimport { ActivatedRoute } from \"@angular/router\";\nimport { WebSocketsService } from 'src/app/services/websocket.service';\nimport { Observer, Observable, of, Subject } from 'rxjs';\nimport { MovieRoom } from 'src/app/entities/movieRoom';\nimport { MatVideoComponent } from 'mat-video/lib/video.component';\nimport { ChatMessage } from 'src/app/entities/chatMessage';\nimport { AuthService, SocialUser } from 'angularx-social-login';\nimport { MovieComment } from 'src/app/entities/movieComment';\nimport { FormControl, FormGroup } from '@angular/forms';\n\n\n@Component({\n  selector: 'app-movie-room',\n  templateUrl: './movie-room.component.html',\n  styleUrls: ['./movie-room.component.scss']\n})\nexport class MovieRoomComponent implements OnInit {\n\n  private video: MatVideoComponent;\n  @ViewChild('video') set matVideo(matVideo: MatVideoComponent) {\n    if (matVideo) { // initially setter gets called with undefined\n      this.video = matVideo;\n    }\n  }\n  room: MovieRoom;\n  roomId: string;\n\n  chatMessages: ChatMessage[] = [];\n  comments: MovieComment[] = [];\n\n  currentComment: string = \"\";\n\n  ngclass: any;\n  src: string = \"http://static.videogular.com/assets/videos/videogular.mp4\";\n  title: string = this.room ? this.room.Movie.Title : \"Not loaded yet\";\n  autoplay: boolean = true;\n  preload: boolean = true;\n  loop: boolean = false;\n  fullscreen: boolean = false;\n  download: boolean = false;\n  quality: boolean = true;\n  keyboard: boolean = true;\n  color: any;\n  spinner: any;\n  poster: any;\n  muted: boolean = true;\n  overlay: boolean = true;\n  showFrameByFrame: boolean = false;\n  currentTime: number = 1;\n\n  movieCurrentTime: Subject<number> = new Subject<number>();\n\n  seekedByWS: boolean = false;\n\n  user: SocialUser;\n\n  constructor(private route: ActivatedRoute,\n    private changeDetector: ChangeDetectorRef,\n    private webSocketService: WebSocketsService,\n    private authService: AuthService) {\n\n    this.route.params.subscribe(params => {\n      console.log(params);\n\n      this.authService.authState.subscribe(user => {\n        if (user !== null && user !== undefined) {\n          this.user = user;\n\n          this.roomId = params[\"room-id\"];\n          console.log(this.roomId);\n          this.webSocketService.sendMovieRoomWithIdRequest(this.roomId);\n          this.webSocketService.sendChatMessagesRequest(this.roomId);\n        }\n      })\n    });\n  }\n\n  ngOnInit(): void {\n    this.createMovieRoomResponsesSubscription();\n    this.createMovieRoomUpdatesSubscription();\n\n    this.createMovieRoomPauseUpdatesSubscription();\n    this.createMovieRoomPlayUpdatesSubscription();\n    this.createMovieRoomSeekUpdatesSubscription();\n\n    this.createChatMessagesReponsesSubscription();\n    this.createChatMessageUpdatesSubscription();\n\n    this.createCommentsReponsesSubscription();\n    this.createCommentUpdatesSubscription();\n  }\n\n  sendMessage(value: string) {\n    if (!value || value === \"\") {\n      return;\n    }\n\n    let chatMessage: ChatMessage = new ChatMessage(\n      this.roomId,\n      this.user,\n      value,\n      \"voice msg cica\",\n      new Date(),\n      this.video.getVideoTag().currentTime);\n\n    this.chatMessages.push(chatMessage);\n\n    this.webSocketService.sendChatMessageRequest(this.roomId, chatMessage);\n  }\n\n  sendComment(value: string) {\n    let comment: MovieComment = new MovieComment(\n      this.room.Movie.Id,\n      this.user,\n      value,\n      this.video.getVideoTag().currentTime);\n\n    this.comments.push(comment);\n\n    this.webSocketService.sendMovieCommentRequest(this.room.Movie.Id, comment);\n  }\n\n  private processMovieRoom(room: MovieRoom): Observable<MovieRoom> {\n    console.debug('Movie Room received through the observer:\\n%o', room);\n\n    this.room = room;\n\n    this.title = room.Movie.Title;\n    this.changeDetector.detectChanges();\n\n    this.currentTime = room.TimeWatched;\n\n    this.video.timeChange.subscribe(() => {\n      // send ws request to update timewatched \n    });\n\n    this.video.getVideoTag().onpause = () => {\n      // check if it's on pause already-> don't make request\n      console.log(`on pause called, current time: ${this.video.getVideoTag().currentTime}`);\n\n      // send ws request to pause video for all\n      this.webSocketService.sendPauseRequest(this.roomId, this.video.getVideoTag().currentTime);\n    }\n\n    this.video.getVideoTag().onplay = () => {\n      console.log(`on play called, current time: ${this.video.getVideoTag().currentTime}`);\n\n      // send ws reuqest to play the video\n      this.webSocketService.sendPlayRequest(this.roomId, this.video.getVideoTag().currentTime);\n    }\n\n    this.video.getVideoTag().onseeked = () => {\n      console.log(`on seeked moved called, current time: ${this.video.getVideoTag().currentTime}`);\n      if (!this.seekedByWS) {\n        // send ws request to update the time\n        this.webSocketService.sendSeekRequest(this.roomId, this.video.getVideoTag().currentTime);\n      }\n\n      this.seekedByWS = false;\n    }\n\n    this.video.getVideoTag().ontimeupdate = () => {\n      setTimeout(() => { this.movieCurrentTime.next(this.video.getVideoTag().currentTime); }, 1000)\n    }\n\n    console.log(`title: ${this.video.title}`);\n\n    return of(room);\n  }\n\n  private pause(roomId: string, currentTime: number) {\n    if (roomId !== this.roomId) {\n      return;\n    }\n\n    this.changeDetector.detectChanges();\n    this.video.getVideoTag().pause();\n\n    this.currentTime = currentTime;\n  }\n\n  private play(roomId: string, currentTime: number) {\n    if (roomId !== this.roomId) {\n      return;\n    }\n\n    this.changeDetector.detectChanges();\n    this.video.getVideoTag().play();\n\n    this.currentTime = currentTime;\n  }\n\n  private seek(roomId: string, currentTime: number) {\n    if (roomId !== this.roomId) {\n      return;\n    }\n\n    this.changeDetector.detectChanges();\n    this.seekedByWS = true;\n\n    this.video.getVideoTag().currentTime = currentTime;\n\n    this.currentTime = currentTime;\n  }\n\n  private setChatMessages(roomId: string, chatMessages: ChatMessage[]) {\n    if (roomId !== this.roomId) {\n      return;\n    }\n\n    if (!chatMessages) {\n      return;\n    }\n\n    this.chatMessages = chatMessages;\n  }\n\n  private addChatMessage(chatMessage: ChatMessage) {\n    if (!chatMessage) {\n      return;\n    }\n\n    if (chatMessage.RoomId !== this.roomId) {\n      return;\n    }\n\n    this.chatMessages.push(chatMessage);\n  }\n\n  private createMovieRoomResponsesSubscription() {\n    let self = this;\n    const movieRoomResponsesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        self.processMovieRoom(room).subscribe(room => {\n          self.webSocketService.sendMovieCommentsRequest(room.Movie.Id);\n        });\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomResponses(movieRoomResponsesObserver);\n  }\n\n  private createMovieRoomUpdatesSubscription() {\n    let self = this;\n    const movieRoomUpdatesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        if (room.Id !== self.roomId) {\n          return;\n        }\n\n        self.processMovieRoom(room);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomUpdates(movieRoomUpdatesObserver);\n  }\n\n  private createMovieRoomPauseUpdatesSubscription() {\n    let self = this;\n    const movieRoomResponsesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        self.pause(room.Id, room.TimeWatched);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomPauseUpdates(movieRoomResponsesObserver);\n  }\n\n  private createMovieRoomPlayUpdatesSubscription() {\n    let self = this;\n    const movieRoomUpdatesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        self.play(room.Id, room.TimeWatched);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomPlayUpdates(movieRoomUpdatesObserver);\n  }\n\n  private createMovieRoomSeekUpdatesSubscription() {\n    let self = this;\n    const movieRoomUpdatesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        self.seek(room.Id, room.TimeWatched);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomSeekUpdates(movieRoomUpdatesObserver);\n  }\n\n  private createChatMessagesReponsesSubscription() {\n    let self = this;\n    const chatMessagesResponseObserver: Observer<ChatMessage[]> = {\n      next: function (messages: ChatMessage[]): void {\n        if (!messages || messages.length === 0) {\n          return;\n        }\n\n        self.setChatMessages(messages[0].RoomId, messages);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more chat messages responses');\n      }\n    };\n\n    this.webSocketService.subscribeToChatMessagesReponses(chatMessagesResponseObserver);\n  }\n\n  private createChatMessageUpdatesSubscription() {\n    let self = this;\n    const chatMessagesUpdateObserver: Observer<ChatMessage> = {\n      next: function (message: ChatMessage): void {\n        if (!message) {\n          return;\n        }\n\n        self.addChatMessage(message);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more chat message updates');\n      }\n    };\n\n    this.webSocketService.subscribeToChatMessageUpdates(chatMessagesUpdateObserver);\n  }\n\n  private createCommentsReponsesSubscription() {\n    let self = this;\n    const commentsResponseObserver: Observer<MovieComment[]> = {\n      next: function (messages: MovieComment[]): void {\n        if (!messages || messages.length === 0) {\n          return;\n        }\n\n        self.setComments(messages);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more chat messages responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieCommentsReponses(commentsResponseObserver);\n  }\n\n  private createCommentUpdatesSubscription() {\n    let self = this;\n    const commentsUpdateObserver: Observer<MovieComment> = {\n      next: function (message: MovieComment): void {\n        if (!message) {\n          return;\n        }\n\n        self.addComment(message);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more chat message updates');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieCommentUpdates(commentsUpdateObserver);\n  }\n\n  addComment(comment: MovieComment) {\n    if (comment == null) {\n      return;\n    }\n\n    if (comment.MovieId !== this.room.Movie.Id) {\n      return;\n    }\n\n    this.comments.push(comment);\n  }\n\n  setComments(comments: MovieComment[]) {\n    if (comments === null || comments === undefined || comments.length === 0) {\n      return;\n    }\n\n    if (comments[0].MovieId !== this.room.Movie.Id) {\n      return;\n    }\n\n    this.comments = comments;\n    this.show();\n  }\n\n  show() {\n    this.movieCurrentTime.subscribe(time => {\n\n      let comment = this.comments.find(x => x.Shown === undefined && x.CurrentTime - time < 0.3 && x.CurrentTime-time>0);\n      if (comment) {\n        this.currentComment = `${comment.User.firstName}: ${comment.Comment}`;\n        comment.Shown = true;\n        setTimeout(() => { this.currentComment = \"\" }, 2000)\n      }\n    });\n  }\n}\n","<div *ngIf=\"room!==undefined\">\n\n    <div>\n        <p>Send comment:</p>\n        <input #comm (keyup.enter)=\"sendComment(comm.value)\">\n        <p>Current comment: {{currentComment}}</p>\n    </div>\n\n    <p>{{room.Users}}</p>\n    <p>{{room.Id}}</p>\n\n    <div class=\"row col-lg-12\" style=\"max-height: 80vh;\">\n        <div class=\"col-lg-8\">\n            <mat-video #video [src]=\"src\" [title]=\"title\" [autoplay]=\"autoplay\" [preload]=\"preload\" [loop]=\"loop\"\n                [fullscreen]=\"fullscreen\" [download]=\"download\" [quality]=\"quality\" [keyboard]=\"keyboard\"\n                [color]=\"color\" [spinner]=\"spinner\" [poster]=\"poster\" [overlay]=\"overlay\" [(muted)]=\"muted\"\n                [showFrameByFrame]=\"showFrameByFrame\" [(time)]=\"currentTime\">\n            </mat-video>\n        </div>\n\n        <div class=\"col-lg-4 hidden-md hidden-sm hidden-xs\">\n            <div class=\"panel panel-primary\">\n                <div class=\"panel-heading\" style=\"padding:0 0 0 8px;\">\n                    <!-- <span class=\"glyphicon glyphicon-user\"></span> -->\n                    <h6 class=\"panel-title\" style=\"display:inline;\">Chat</h6>\n                    <!-- <div class=\"btn-group btn-group-xs pull-right\">\n                        <button type=\"button\" class=\"btn btn-primary\"><span\n                                class=\"glyphicon glyphicon-lock\"></span></button>\n                        <button type=\"button\" class=\"btn btn-primary\"><span\n                                class=\"glyphicon glyphicon-cog\"></span></button>\n                        <button type=\"button\" class=\"btn btn-primary\"><span\n                                class=\"glyphicon glyphicon-remove\"></span></button>\n                    </div> -->\n                    <div class=\"clearfix\"></div>\n                </div>\n                <div class=\"panel-body\" style=\"padding:0 4px;\">\n                    <div #msgContainer style=\"max-height:80vh; max-width:100%;overflow-y:auto;overflow-x:hidden;\">\n                        <table class=\"table table-hover table-condensed\" *ngIf=\"chatMessages.length !== 0\">\n                            <tr *ngFor=\"let message of chatMessages\" style=\"width:100%;\">\n                                <td>\n                                    <img [src]=\"message.User.photoUrl\" style=\"margin-top:8px; height: 20px;\" /></td>\n                                <td>\n                                    <h6>{{message.User.name}}</h6>\n                                </td>\n                                <td>\n                                    <p class=\"word-wrap:break-word\">\n                                        <small>{{message.Message}}</small></p>\n                                </td>\n                            </tr>\n                            <tr *ngIf=\"chatMessages.length === 0\">\n                                <td>\n                                    <p>Nothin' here. <strong>Say something!</strong></p>\n                                </td>\n                            </tr>\n                        </table>\n                    </div>\n                </div>\n                <div class=\"panel-footer\">\n                    <form>\n                        <div class=\"input-group input-group-sm\">\n                            <input #msg type=\"text\" class=\"form-control\" placeholder=\"Send a message...\" />\n                            <span class=\"input-group-btn\">\n                                <button class=\"btn btn-primary\" type=\"submit\"\n                                    (click)=\"sendMessage(msg.value)\">Send</button>\n                            </span>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { WebSocketsService } from 'src/app/services/websocket.service';\nimport { Observer } from 'rxjs';\nimport { Movie } from 'src/app/entities/movie';\nimport { Router } from '@angular/router';\nimport { MovieRoom } from 'src/app/entities/movieRoom';\n\n@Component({\n  selector: 'movie-list',\n  templateUrl: './movielist.component.html',\n  styleUrls: ['./movielist.component.scss']\n})\nexport class MovielistComponent implements OnInit {\n\n  movies: Movie[] = [];\n  movieRooms: MovieRoom[] = [];\n  constructor(private webSocketService: WebSocketsService, private router: Router) { }\n\n  ngOnInit(): void {\n    this.createMovieListResponsesSubscription();\n    this.createMovieListUpdatesSubscription();\n\n    this.createMovieRoomsResponsesSubscription();\n    this.createMovieRoomsUpdatesSubscription();\n\n    this.createMovieRoomResponsesSubscription();\n    this.createMovieRoomUpdatesSubscription();\n\n    this.webSocketService.sendMovieListRequest();\n    this.webSocketService.sendMovieRoomsRequest();\n  }\n\n  goToMovie(movie: Movie) {\n    console.log(movie);\n\n    this.webSocketService.sendMovieRoomRequest(movie.Id);\n  }\n\n  private processMovies(movieList: Movie[]): void {\n    console.debug('Movies received through the observer:\\n%o', movieList);\n\n    this.movies = movieList;\n  }\n\n  private processMovieRoom(room: MovieRoom): void {\n    console.debug('Movie Room received through the observer:\\n%o', room);\n\n    this.router.navigate([`movies/${room.Id}`]);\n  }\n\n  private processMovieRooms(rooms: MovieRoom[]): void {\n    console.debug('Movie Rooms received through the observer:\\n%o', rooms);\n\n    this.movieRooms = rooms;\n  }\n\n  private createMovieListResponsesSubscription() {\n    let self = this;\n    const movieListResponsesObserver: Observer<Movie[]> = {\n      next: function (movies: Movie[]): void {\n        self.processMovies(movies);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieListResponses(movieListResponsesObserver);\n  }\n\n  private createMovieListUpdatesSubscription() {\n    let self = this;\n    const movieListUpdatesObserver: Observer<Movie[]> = {\n      next: function (movies: Movie[]): void {\n        self.processMovies(movies);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies updates');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieListUpdates(movieListUpdatesObserver);\n  }\n\n  private createMovieRoomsResponsesSubscription() {\n    let self = this;\n    const movieRoomsResponsesObserver: Observer<MovieRoom[]> = {\n      next: function (movieRooms: MovieRoom[]): void {\n        self.processMovieRooms(movieRooms);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomsResponses(movieRoomsResponsesObserver);\n  }\n\n  private createMovieRoomsUpdatesSubscription() {\n    let self = this;\n    const movieRoomsUpdatesObserver: Observer<MovieRoom[]> = {\n      next: function (movieRooms: MovieRoom[]): void {\n        self.processMovieRooms(movieRooms);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies updates');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomsUpdates(movieRoomsUpdatesObserver);\n  }\n\n  private createMovieRoomResponsesSubscription() {\n    let self = this;\n    const movieRoomResponsesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        self.processMovieRoom(room);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomResponses(movieRoomResponsesObserver);\n  }\n\n  private createMovieRoomUpdatesSubscription() {\n    let self = this;\n    const movieRoomUpdatesObserver: Observer<MovieRoom> = {\n      next: function (room: MovieRoom): void {\n        self.processMovieRoom(room);\n      },\n\n      error: function (err: any): void {\n        console.error('Error: %o', err);\n      },\n\n      complete: function (): void {\n        console.log('No more movies responses');\n      }\n    };\n\n    this.webSocketService.subscribeToMovieRoomUpdates(movieRoomUpdatesObserver);\n  }\n}\n","<div *ngIf=\"movies.length > 0\" class=\"bold\">\n    <h3>Movies</h3>\n    <p>Movies count:{{movies.length}}</p>\n    <div>\n        <ul>\n            <li *ngFor=\"let movie of movies\">\n                <button (click)=\"goToMovie(movie)\">{{movie.Title}}</button>\n            </li>\n        </ul>\n    </div>\n\n    <div>\n        <p>Movie rooms count: {{movieRooms.length}}\n        <ul>\n            <li *ngFor=\"let room of movieRooms\">\n                <button>{{room.Id}}</button>\n            </li>\n        </ul>\n    </div>\n</div>","import { SocialUser } from 'angularx-social-login';\r\n\r\nexport class ChatMessage {\r\n    Id: string;\r\n    RoomId: string;\r\n    User: SocialUser;\r\n\r\n    Message: string;\r\n    VoiceMessage: string;\r\n    DateTime: Date;\r\n    MovieCurrentTime: number; // seconds into the movie\r\n\r\n    constructor(roomId: string, user: SocialUser, message: string, voiceMessage: string, datetime: Date, movieCurrentTime: number) {\r\n        this.RoomId = roomId;\r\n        this.User = user;\r\n        this.Message = message;\r\n        this.VoiceMessage = voiceMessage;\r\n        this.DateTime = datetime;\r\n        this.MovieCurrentTime = movieCurrentTime;\r\n    }\r\n}\r\n","export enum MessageType {\r\n\r\n  SAVE_USER_REQUEST = 'SAVE_USER_REQUEST',\r\n  \r\n  MOVIE_LIST_REQUEST = 'MOVIE_LIST_REQUEST',\r\n  MOVIE_LIST_RESPONSE = 'MOVIE_LIST_RESPONSE',\r\n  MOVIE_LIST_UPDATE = 'MOVIE_LIST_UPDATE',\r\n\r\n  MOVIE_ROOMS_REQUEST = 'MOVIE_ROOMS_REQUEST',\r\n  MOVIE_ROOMS_RESPONSE = 'MOVIE_ROOMS_RESPONSE',\r\n  MOVIE_ROOMS_UPDATE = 'MOVIE_ROOMS_UPDATE',\r\n\r\n  MOVIE_ROOM_REQUEST = 'MOVIE_ROOM_REQUEST',\r\n  MOVIE_ROOM_WITH_ID_REQUEST = 'MOVIE_ROOM_WITH_ID_REQUEST',\r\n  MOVIE_ROOM_RESPONSE = 'MOVIE_ROOM_RESPONSE',\r\n  MOVIE_ROOM_UPDATE = 'MOVIE_ROOM_UPDATE',\r\n\r\n  MOVIE_STREAM_REQUEST = 'MOVIE_STREAM_REQUEST',\r\n  MOVIE_STREAM_RESPONSE = 'MOVIE_STREAM_RESPONSE',\r\n  MOVIE_STREAM_UPDATE = 'MOVIE_STREAM_UPDATE',\r\n  \r\n  MOVIE_CHAT_REQUEST = 'MOVIE_CHAT_REQUEST',\r\n  MOVIE_CHAT_RESPONSE = 'MOVIE_CHAT_RESPONSE',\r\n  MOVIE_CHAT_UPDATE = 'MOVIE_CHAT_UPDATE',\r\n\r\n  SEND_CHAT_MESSAGE_REQUEST = 'SEND_CHAT_MESSAGE_REQUEST',\r\n  CHAT_MESSAGES_REQUEST = 'CHAT_MESSAGES_REQUEST',\r\n  CHAT_MESSAGES_RESPONSE = 'CHAT_MESSAGES_RESPONSE',\r\n  CHAT_MESSAGE_UPDATE = 'CHAT_MESSAGE_UPDATE',\r\n\r\n  SEND_MOVIE_COMMENT_REQUEST = 'SEND_MOVIE_COMMENT_REQUEST',\r\n  MOVIE_COMMENTS_REQUEST = 'MOVIE_COMMENTS_REQUEST',\r\n  MOVIE_COMMENTS_RESPONSE = 'MOVIE_COMMENTS_RESPONSE',\r\n  MOVIE_COMMENT_UPDATE = 'MOVIE_COMMENT_UPDATE',\r\n\r\n  MOVIE_ROOM_PAUSE_REQUEST = 'MOVIE_ROOM_PAUSE_REQUEST',\r\n  MOVIE_ROOM_PAUSE_UPDATE = 'MOVIE_ROOM_PAUSE_UPDATE',\r\n  \r\n  MOVIE_ROOM_PLAY_REQUEST = 'MOVIE_ROOM_PLAY_REQUEST',\r\n  MOVIE_ROOM_PLAY_UPDATE = 'MOVIE_ROOM_PLAY_UPDATE',\r\n  \r\n  MOVIE_ROOM_SEEK_REQUEST = 'MOVIE_ROOM_SEEK_REQUEST',\r\n  MOVIE_ROOM_SEEK_UPDATE = 'MOVIE_ROOM_SEEK_UPDATE',\r\n\r\n  MOVIE_CLOSE_REQUEST = 'MOVIE_CLOSE_REQUEST',\r\n  MOVIE_CLOSE_RESPONSE = 'MOVIE_CLOSE_RESPONSE',\r\n\r\n  // hmm............... idk if personal is needed or doable in the current implementation\r\n  MOVIE_CLOSE_PERSONAL_REQUEST = 'MOVIE_CLOSE_PERSONAL_REQUEST',\r\n  MOVIE_CLOSE_PERSONAL_RESPONSE = 'MOVIE_CLOSE_PERSONAL_RESPONSE'\r\n}\r\n","import { MessageType } from './messageType';\r\nexport class MessageWrapper {\r\n\r\n  readonly type: string;\r\n  readonly payload: string;\r\n\r\n  constructor(messageType: MessageType, payload: Object) {\r\n    this.type = messageType;\r\n    this.payload = JSON.stringify(payload);\r\n  }\r\n}\r\n","import { SocialUser } from 'angularx-social-login';\r\n\r\nexport class MovieComment {\r\n\r\n  Id: string;\r\n  MovieId: string;\r\n  User: SocialUser;\r\n\r\n  Comment: string;\r\n  CurrentTime: number;\r\n  Shown: boolean;\r\n\r\n  constructor(movieId: string, user: SocialUser, comment: string, currentTime: number) {\r\n    this.MovieId = movieId;\r\n    this.User = user;\r\n    this.Comment = comment;\r\n    this.CurrentTime = currentTime;\r\n  }\r\n}\r\n","export class ChatMessagesRequest {\r\n\r\n  public roomId: string;\r\n  public userId: string;\r\n\r\n  constructor(roomId: string, userId: string) {\r\n    this.roomId = roomId;\r\n    this.userId = userId;\r\n  }\r\n}\r\n","export class MovieCommentsRequest {\r\n\r\n  public movieId: string;\r\n\r\n  constructor(movieId: string) {\r\n    this.movieId = movieId;\r\n  }\r\n}\r\n","export class MovieListRequest {\r\n \r\n  constructor () {\r\n  }\r\n}\r\n","export class MovieRoomPauseRequest {\r\n\r\n  public roomId: string;\r\n  public userId: string;\r\n  public currentTime: number;\r\n\r\n  constructor(roomId: string, userId: string, currentTime: number) {\r\n    this.roomId = roomId;\r\n    this.userId = userId;\r\n    this.currentTime = currentTime;\r\n  }\r\n}\r\n","export class MovieRoomPlayRequest {\r\n\r\n  public roomId: string;\r\n  public userId: string;\r\n  public currentTime: number;\r\n\r\n  constructor(roomId: string, userId: string, currentTime: number) {\r\n    this.roomId = roomId;\r\n    this.userId = userId;\r\n    this.currentTime = currentTime;\r\n  }\r\n}\r\n","export class MovieRoomRequest {\r\n\r\n  public movieId: string;\r\n  public userId: string;\r\n\r\n  constructor(movieId: string, userId: string) {\r\n    this.movieId = movieId;\r\n    this.userId = userId;\r\n  }\r\n}\r\n","export class MovieRoomSeekRequest {\r\n\r\n  public roomId: string;\r\n  public userId: string;\r\n  public currentTime: number;\r\n\r\n  constructor(roomId: string, userId: string, currentTime: number) {\r\n    this.roomId = roomId;\r\n    this.userId = userId;\r\n    this.currentTime = currentTime;\r\n  }\r\n}\r\n","export class MovieRoomWithIdRequest {\r\n\r\n  public roomId: string;\r\n  public userId: string;\r\n\r\n  constructor(roomId: string, userId: string) {\r\n    this.roomId = roomId;\r\n    this.userId = userId;\r\n  }\r\n}\r\n","export class MovieRoomsRequest {\r\n\r\n  public userId: string;\r\n\r\n  constructor(userId: string) {\r\n    this.userId = userId;\r\n  }\r\n}","import { SocialUser } from 'angularx-social-login';\r\n\r\nexport class SaveUserRequest {\r\n  \r\n  public user: SocialUser;\r\n\r\n  constructor(user: SocialUser) {\r\n    this.user = user;\r\n  }\r\n}\r\n","import { ChatMessage } from '../chatMessage';\r\n\r\nexport class SendChatMessageRequest {\r\n\r\n  public roomId: string;\r\n  public userId: string;\r\n  public chatMessage: ChatMessage;\r\n\r\n  constructor(roomId: string, userId: string, chatMessage: ChatMessage) {\r\n    this.roomId = roomId;\r\n    this.userId = userId;\r\n    this.chatMessage = chatMessage;\r\n  }\r\n}\r\n","import { MovieComment } from '../movieComment';\r\n\r\nexport class SendMovieCommentRequest {\r\n\r\n  public movieId: string;\r\n  public movieComment: MovieComment;\r\n\r\n  constructor(movieId: string, movieComment: MovieComment) {\r\n    this.movieId = movieId;\r\n    this.movieComment = movieComment;\r\n  }\r\n}\r\n","import { Injectable, OnInit } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { AuthService, SocialUser, GoogleLoginProvider } from 'angularx-social-login';\nimport { CookieService } from 'ngx-cookie-service';\nimport { WebSocketsService } from '../services/websocket.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthGuard implements CanActivate {\n  user: SocialUser;\n  loggedIn: boolean;\n\n  constructor(\n    private authService: AuthService,\n    private cookieService: CookieService,\n    private webSocketService: WebSocketsService,\n    private router: Router) {\n\n    this.authService.authState.subscribe((user) => {\n      this.user = user;\n      this.loggedIn = (user != null);\n\n      if(this.loggedIn){\n        console.log(this.user);\n\n        webSocketService.sendSaveUserRequest(user);\n\n        this.saveToCookie(\"authToken\", this.user.authToken);\n        this.saveToCookie(\"idToken\", this.user.idToken);\n      }\n    });\n  }\n\n  canActivate(\n    next: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\n    let existentCookie = this.cookieService.get(\"authToken\");\n    if (!existentCookie) {\n      this.signInWithGoogle();\n    } else {\n      // this.router.navigate([\"movies\"]);\n      return true;\n    }\n  }\n\n  /**\n   * Checks if the given value is valid, in which case it saves it to cookies under the given name.\n   * @param name name of the cookie\n   * @param value\n   */\n  private saveToCookie(name: string, value: string) {\n    if (!value || value === \"invalid\") {\n      return;\n    }\n\n    let existentCookie = this.cookieService.get(name);\n    if (existentCookie === value) {\n      return;\n    }\n\n    this.cookieService.set(name, value, 1, \"/\");\n  }\n\n  signInWithGoogle(): Promise<void> {\n    return this.authService.signIn(GoogleLoginProvider.PROVIDER_ID, { ux_mode: \"redirect\" }).then((user) => {\n      if (user !== null && user.authToken) {\n        this.router.navigateByUrl('/', { skipLocationChange: true }).then(() =>\n          this.router.navigate([\"\"]));\n      }\n    });\n  }\n}\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class AppConfigService {\r\n\r\n  private appConfig: any;\r\n\r\n  constructor() { }\r\n\r\n  // public loadAppConfig(): Promise<string | void> {\r\n  //   // return this.httpClient.get('/assets/config.json')\r\n  //   //   .toPromise()\r\n  //   //   .then(data => {\r\n  //   //     this.appConfig = data;\r\n  //   // });\r\n  // }\r\n\r\n  public get webSocketsServerUrl(): string {\r\n    // if (!this.appConfig) {\r\n    //   throw Error('Config file not loaded!');\r\n    // }\r\n\r\n\r\n    // return \"ws://echo.websocket.org\";\r\n    return \"wss://localhost:44343/movies\";\r\n  }\r\n}\r\n","import { Injectable, OnInit } from '@angular/core';\nimport { Observer, Subject } from 'rxjs';\n\nimport { AppConfigService } from './appConfig.service';\nimport { MessageWrapper } from '../entities/messageWrapper';\nimport { MessageType } from '../entities/messageType';\nimport { Movie } from '../entities/movie';\nimport { MovieListRequest } from '../entities/requests/movieListRequest';\nimport { AuthService, SocialUser } from 'angularx-social-login';\nimport { MovieRoomRequest } from '../entities/requests/movieRoomRequest';\nimport { MovieRoom } from '../entities/movieRoom';\nimport { MovieRoomsRequest } from '../entities/requests/movieRoomsRequest';\nimport { SaveUserRequest } from '../entities/requests/saveUserRequest';\nimport { MovieRoomWithIdRequest } from '../entities/requests/movieRoomWithIdRequest';\nimport { MovieRoomPauseRequest } from '../entities/requests/movieRoomPauseRequest';\nimport { MovieRoomPlayRequest } from '../entities/requests/movieRoomPlayRequest';\nimport { MovieRoomSeekRequest } from '../entities/requests/movieRoomSeekRequest';\nimport { MovieRoomAction } from '../entities/movieRoomAction';\nimport { ChatMessage } from '../entities/chatMessage';\nimport { SendChatMessageRequest } from '../entities/requests/sendChatMessageRequest';\nimport { ChatMessagesRequest } from '../entities/requests/chatMessagesRequest';\nimport { MovieComment } from '../entities/movieComment';\nimport { MovieCommentsRequest } from '../entities/requests/movieCommentsRequest';\nimport { SendMovieCommentRequest } from '../entities/requests/sendMovieCommentRequest';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WebSocketsService {\n  private user: SocialUser;\n  private webSocket: WebSocket;\n\n  // Maybe we only need one balance subject\n  private movieListResponseSubject: Subject<Movie[]>;\n  private movieListUpdateSubject: Subject<Movie[]>;\n\n  private movieRoomsResponseSubject: Subject<MovieRoom[]>;\n  private movieRoomsUpdateSubject: Subject<MovieRoom[]>;\n\n  private movieRoomResponseSubject: Subject<MovieRoom>;\n  private movieRoomUpdateSubject: Subject<MovieRoom>;\n\n  private movieRoomPauseUpdateSubject: Subject<MovieRoom>;\n  private movieRoomPlayUpdateSubject: Subject<MovieRoom>;\n  private movieRoomSeekUpdateSubject: Subject<MovieRoom>;\n\n  private chatMessagesReponseSubject: Subject<ChatMessage[]>;\n  private chatMessageUpdateSubject: Subject<ChatMessage>;\n\n  private commentsReponseSubject: Subject<MovieComment[]>;\n  private commentUpdateSubject: Subject<MovieComment>;\n\n  constructor(private appConfigService: AppConfigService, private authService: AuthService) {\n    this.authService.authState.subscribe((user) => {\n      if (user !== null && user !== undefined) {\n        this.user = user;\n        console.log(this.user);\n      }\n    });\n\n    this.movieListResponseSubject = new Subject<Movie[]>();\n    this.movieListUpdateSubject = new Subject<Movie[]>();\n\n    this.movieRoomsResponseSubject = new Subject<MovieRoom[]>();\n    this.movieRoomsUpdateSubject = new Subject<MovieRoom[]>();\n\n    this.movieRoomResponseSubject = new Subject<MovieRoom>();\n    this.movieRoomUpdateSubject = new Subject<MovieRoom>();\n\n    this.movieRoomPauseUpdateSubject = new Subject<MovieRoom>();\n    this.movieRoomPlayUpdateSubject = new Subject<MovieRoom>();\n    this.movieRoomSeekUpdateSubject = new Subject<MovieRoom>();\n\n    this.chatMessagesReponseSubject = new Subject<ChatMessage[]>();\n    this.chatMessageUpdateSubject = new Subject<ChatMessage>();\n\n    this.commentsReponseSubject = new Subject<MovieComment[]>();\n    this.commentUpdateSubject = new Subject<MovieComment>();\n  }\n\n  public start(): void {\n    console.debug('Going to connect to the websockets server');\n    this.connect(this.appConfigService.webSocketsServerUrl);\n  }\n\n  public stop(): void {\n    if (this.webSocket != null) {\n      this.webSocket.close();\n    }\n  }\n\n  public subscribeToMovieListResponses(observer: Observer<Movie[]>): void {\n    this.movieListResponseSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieListUpdates(observer: Observer<Movie[]>): void {\n    this.movieListUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomsResponses(observer: Observer<MovieRoom[]>): void {\n    this.movieRoomsResponseSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomsUpdates(observer: Observer<MovieRoom[]>): void {\n    this.movieRoomsUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomResponses(observer: Observer<MovieRoom>): void {\n    this.movieRoomResponseSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomUpdates(observer: Observer<MovieRoom>): void {\n    this.movieRoomUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomPauseUpdates(observer: Observer<MovieRoom>): void {\n    this.movieRoomPauseUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomPlayUpdates(observer: Observer<MovieRoom>): void {\n    this.movieRoomPlayUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieRoomSeekUpdates(observer: Observer<MovieRoom>): void {\n    this.movieRoomSeekUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToChatMessagesReponses(observer: Observer<ChatMessage[]>): void {\n    this.chatMessagesReponseSubject.subscribe(observer);\n  }\n\n  public subscribeToChatMessageUpdates(observer: Observer<ChatMessage>): void {\n    this.chatMessageUpdateSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieCommentsReponses(observer: Observer<MovieComment[]>): void {\n    this.commentsReponseSubject.subscribe(observer);\n  }\n\n  public subscribeToMovieCommentUpdates(observer: Observer<MovieComment>): void {\n    this.commentUpdateSubject.subscribe(observer);\n  }\n\n  private connect(url: string): void {\n    this.webSocket = new WebSocket(url);\n\n    this.webSocket.onopen = function (messageEvent: MessageEvent) {\n      console.info('WebSocket connection has been opened: %o', messageEvent);\n    };\n\n    // we need the \"self\" constant because we cannot use \"this\" inside the function below\n    const self = this;\n\n    this.webSocket.onmessage = function (messageEvent: MessageEvent) {\n      const jsonReceived: string = messageEvent.data;\n\n      console.debug('WebSocket message received: %s', jsonReceived);\n\n      self.authService.authState.subscribe((user) => {\n        if (user !== undefined && user !== null) {\n          self.user = user;\n          self.handleMessage(jsonReceived);\n        }\n      })\n\n    };;\n\n    this.webSocket.onerror = function (messageEvent: MessageEvent) {\n      console.error('WebSocket error observed: %o', messageEvent);\n    };\n\n    this.webSocket.onclose = function (closeEvent: CloseEvent) {\n      console.info('WebSocket connection has been closed: %o', closeEvent);\n    };\n  }\n\n  public sendSaveUserRequest(user: SocialUser): void {\n    const request: SaveUserRequest = new SaveUserRequest(user);\n    const message: MessageWrapper = new MessageWrapper(MessageType.SAVE_USER_REQUEST, request);\n\n    this.sendMessage(this.webSocket, message);\n  }\n\n  public sendMovieListRequest(): void {\n    const request: MovieListRequest = new MovieListRequest();\n    const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_LIST_REQUEST, request);\n\n    this.sendMessage(this.webSocket, message);\n  }\n\n  public sendMovieStreamRequest(): void {\n    const request: MovieListRequest = new MovieListRequest();\n    const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_LIST_REQUEST, request);\n\n    this.sendMessage(this.webSocket, message);\n  }\n\n  public sendMovieRoomsRequest(): void {\n    this.authService.authState.subscribe(user => {\n      const request: MovieRoomsRequest = new MovieRoomsRequest(user.id);\n      const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_ROOMS_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendMovieRoomRequest(movieId: string): void {\n    this.authService.authState.subscribe(user => {\n      const request: MovieRoomRequest = new MovieRoomRequest(movieId, user.id);\n      const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_ROOM_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendMovieRoomWithIdRequest(roomId: string): void {\n    this.authService.authState.subscribe(user => {\n      const request: MovieRoomWithIdRequest = new MovieRoomWithIdRequest(roomId, user.id);\n      const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_ROOM_WITH_ID_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendPauseRequest(roomId: string, currentTime: number): void {\n    this.authService.authState.subscribe(user => {\n      const request: MovieRoomPauseRequest = new MovieRoomPauseRequest(roomId, user.id, currentTime);\n      const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_ROOM_PAUSE_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendPlayRequest(roomId: string, currentTime: number): void {\n    this.authService.authState.subscribe(user => {\n      const request: MovieRoomPlayRequest = new MovieRoomPlayRequest(roomId, user.id, currentTime);\n      const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_ROOM_PLAY_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendSeekRequest(roomId: string, currentTime: number): void {\n    this.authService.authState.subscribe(user => {\n      const request: MovieRoomSeekRequest = new MovieRoomSeekRequest(roomId, user.id, currentTime);\n      const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_ROOM_SEEK_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendChatMessagesRequest(roomId: string): void {\n    this.authService.authState.subscribe(user => {\n      const request: ChatMessagesRequest = new ChatMessagesRequest(roomId, user.id);\n      const message: MessageWrapper = new MessageWrapper(MessageType.CHAT_MESSAGES_REQUEST, request);\n\n      this.sendMessage(this.webSocket, message);\n    });\n  }\n\n  public sendChatMessageRequest(roomId: string, chatMessage: ChatMessage): void {\n    this.authService.authState.subscribe(user => {\n      if (user) {\n        chatMessage.User = user\n        const request: SendChatMessageRequest = new SendChatMessageRequest(roomId, user.id, chatMessage);\n        const message: MessageWrapper = new MessageWrapper(MessageType.SEND_CHAT_MESSAGE_REQUEST, request);\n\n        this.sendMessage(this.webSocket, message);\n      }\n    });\n  }\n\n  public sendMovieCommentsRequest(movieId: string): void {\n    const request: MovieCommentsRequest = new MovieCommentsRequest(movieId);\n    const message: MessageWrapper = new MessageWrapper(MessageType.MOVIE_COMMENTS_REQUEST, request);\n\n    this.sendMessage(this.webSocket, message);\n  }\n\n  public sendMovieCommentRequest(movieId: string, comment: MovieComment): void {\n    this.authService.authState.subscribe(user => {\n      if (user) {\n        const request: SendMovieCommentRequest = new SendMovieCommentRequest(movieId, comment);\n        const message: MessageWrapper = new MessageWrapper(MessageType.SEND_MOVIE_COMMENT_REQUEST, request);\n\n        this.sendMessage(this.webSocket, message);\n      }\n    });\n  }\n\n  private waitForOpenConnection(socket: WebSocket) {\n    return new Promise((resolve, reject) => {\n      const maxNumberOfAttempts = 10\n      const intervalTime = 200 //ms\n\n      let currentAttempt = 0\n      const interval = setInterval(() => {\n        if (currentAttempt > maxNumberOfAttempts - 1) {\n          clearInterval(interval)\n          reject(new Error('Maximum number of attempts exceeded'))\n        } else if (socket.readyState === socket.OPEN) {\n          clearInterval(interval)\n          resolve()\n        }\n        currentAttempt++\n      }, intervalTime)\n    })\n  }\n\n  private async sendMessage(socket: WebSocket, message: MessageWrapper) {\n    if (socket.readyState !== socket.OPEN) {\n      try {\n        await this.waitForOpenConnection(socket);\n      } catch (err) {\n        console.error(err)\n        return;\n      }\n    }\n\n    socket.send(JSON.stringify(message))\n  }\n\n  private handleMessage(messageRecieved: string) {\n    let messageWrapper = this.validateAndGetMessage(messageRecieved);\n\n    switch (messageWrapper.type) {\n      case MessageType.MOVIE_LIST_RESPONSE:\n        let movies: Movie[] = [];\n        try {\n          movies = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Movie list reponse: Unable to deserialize Movie[] object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        console.debug('Movies message received: %o', movies);\n        this.movieListResponseSubject.next(movies);\n        break;\n      case MessageType.MOVIE_ROOMS_RESPONSE:\n        let rooms: MovieRoom[];\n        try {\n          rooms = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Room reponse: Unable to deserialize MovieRoom object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        console.debug('Room received: %o', rooms);\n        this.movieRoomsResponseSubject.next(rooms);\n        break;\n\n      case MessageType.MOVIE_ROOMS_UPDATE:\n        let roomsUpdated: MovieRoom[];\n        try {\n          roomsUpdated = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Room reponse: Unable to deserialize MovieRoom object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        console.debug('Room received: %o', roomsUpdated);\n        this.movieRoomsUpdateSubject.next(roomsUpdated);\n        break;\n\n\n      case MessageType.MOVIE_ROOM_RESPONSE:\n        let room: MovieRoom;\n        try {\n          room = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Room reponse: Unable to deserialize MovieRoom object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        console.debug('Room received: %o', room);\n        this.movieRoomResponseSubject.next(room);\n        break;\n\n      case MessageType.MOVIE_ROOM_UPDATE:\n        let roomUpdated: MovieRoom;\n        try {\n          roomUpdated = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Room update: Unable to deserialize MovieRoom object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        console.debug('Room received: %o', roomUpdated);\n        this.movieRoomUpdateSubject.next(roomUpdated);\n        break;\n\n      case MessageType.MOVIE_ROOM_PLAY_UPDATE:\n        let roomActionPlay: MovieRoomAction;\n        try {\n          roomActionPlay = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Play video: Unable to deserialize MovieRoomAction object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        if (roomActionPlay.UserId === this.user.id) {\n          return;\n        }\n\n        console.debug('Room received: %o', roomActionPlay.Room);\n        this.movieRoomPlayUpdateSubject.next(roomActionPlay.Room);\n        break;\n\n      case MessageType.MOVIE_ROOM_PAUSE_UPDATE:\n        let roomActionPause: MovieRoomAction;\n        try {\n          roomActionPause = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Pause video: Unable to deserialize MovieRoomAction object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        if (roomActionPause.UserId === this.user.id) {\n          return;\n        }\n\n        console.debug('Room received: %o', roomActionPause.Room);\n        this.movieRoomPauseUpdateSubject.next(roomActionPause.Room);\n        break;\n\n      case MessageType.MOVIE_ROOM_SEEK_UPDATE:\n        let roomActionSeek: MovieRoomAction;\n        try {\n          roomActionSeek = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Seek video: Unable to deserialize MovieRoomAction object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        if (roomActionSeek.UserId === this.user.id) {\n          return;\n        }\n\n        console.debug('Room received: %o', roomActionSeek.Room);\n        this.movieRoomSeekUpdateSubject.next(roomActionSeek.Room);\n        break;\n\n      case MessageType.CHAT_MESSAGES_RESPONSE:\n        let messages: ChatMessage[];\n        try {\n          messages = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Get chat messages response: Unable to deserialize ChatMessage[] object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        console.debug('Chat Message received: %o', messages);\n        this.chatMessagesReponseSubject.next(messages);\n        break;\n\n      case MessageType.CHAT_MESSAGE_UPDATE:\n        let message: ChatMessage;\n        try {\n          message = JSON.parse(messageWrapper.payload);\n        } catch (error) {\n          console.error('Get chat message rupdate : Unable to deserialize ChatMessage object: %s',\n            messageWrapper.payload);\n          return;\n        }\n\n        if (message.User.id === this.user.id) {\n          // if the message was sent by the current user, exit\n          return;\n        }\n\n        console.debug('Chat Message received: %o', message);\n        this.chatMessageUpdateSubject.next(message);\n        break;\n\n        case MessageType.MOVIE_COMMENTS_RESPONSE:\n          let comments: MovieComment[];\n          try {\n            comments = JSON.parse(messageWrapper.payload);\n          } catch (error) {\n            console.error('Get movie comments response: Unable to deserialize MovieComment[] object: %s',\n              messageWrapper.payload);\n            return;\n          }\n  \n          console.debug('Movie comments received: %o', comments);\n          this.commentsReponseSubject.next(comments);\n          break;\n  \n        case MessageType.MOVIE_COMMENT_UPDATE:\n          let comment: MovieComment;\n          try {\n            comment = JSON.parse(messageWrapper.payload);\n          } catch (error) {\n            console.error('Get movie comment update : Unable to deserialize MovieComment object: %s',\n              messageWrapper.payload);\n            return;\n          }\n  \n          if (comment.User.id === this.user.id) {\n            // if the message was sent by the current user, exit\n            return;\n          }\n  \n          console.debug('Chat Message received: %o', comment);\n          this.commentUpdateSubject.next(comment);\n          break;\n\n      default: break;\n    }\n  }\n\n  private validateAndGetMessage(messageReceived: string) {\n    let messageWrapper: MessageWrapper;\n    try {\n      messageWrapper = JSON.parse(messageReceived);\n    } catch (error) {\n      console.error('Unable to parse received JSON string: %s\\n%o',\n        messageReceived, error);\n      return;\n    }\n\n    if (!messageWrapper.hasOwnProperty('type') ||\n      !messageWrapper.hasOwnProperty('payload')) {\n      console.error('Invalid message received, not the correct properties: %s',\n        messageReceived);\n      return;\n    }\n\n    return messageWrapper;\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}